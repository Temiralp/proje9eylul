<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Belgenin karakter setini ve görünümünü ayarlayan meta etiketleri -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product List</title>
    <!-- Sayfa için stil tanımlamaları -->
    <style> 
    body{
        display: flex;
        justify-content: center;
        flex-direction: column;
        align-items: center;
    }

    .container{
        width: 1000px;
        background-color: powderblue;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
    }

    .content{
        width: 500px;
        background-color: gray;
        margin-top: 20px;
        display: flex;
        flex-wrap: wrap;
    }

    .pagenums{
        width: 500px;
        height: 50px;
        border: 2px solid black;
        display: flex;
        justify-content: center;
    }

    .card{
        width:  150px;
        height: 200px;
        background-color: pink;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        margin-top: 10px;
        margin-left: 10px;
        cursor: pointer;
    }
    </style>
</head>
<body>
    <!-- Sayfanın ana konteyneri -->
    <div class="container">
        <!-- Sayfa numaralarını göstermek için ayrılmış alan -->
        <div class="pagenums"></div>
        <!-- Ürünlerin listeleneceği alan -->
        <div class="content"></div>
    </div>

    <script>
        // Ürün verilerinin saklanacağı global değişken
        let pages;

        // Fake Store API'den ürün verilerini almak için yapılan fetch çağrısı
        fetch("https://fakestoreapi.com/products")
        .then(function(response){
            return response.json(); // Gelen yanıtı JSON formatına dönüştürür
        })
        .then(function(data){
            pages = data; // Gelen veri, pages değişkenine atanır

            // Ürün sayısına göre sayfa numarası butonları oluşturulur
            for(let i = 0; i < pages.length / 4; i++){
                const pagenums = document.querySelector(".pagenums");
                let buton = document.createElement("button");
                buton.onclick = function(){
                    Click(i);
                };
                buton.innerText = i + 1; // Butonların 1'den başlaması için
                pagenums.appendChild(buton);
            }
            Click(0); // İlk sayfayı yükle
        });

        // Sayfa numarasına göre içerik gösterimi sağlayan fonksiyon
        function Click(pageNum){
            const container = document.querySelector(".container");
            let content = document.querySelector(".content");

            if(content == null){
                content = document.createElement("div");
                container.appendChild(content);
                content.classList.add("content");
            }

            content.innerHTML = ""; // İçerik alanını temizler

            // Sayfa numarasına göre ilgili 4 ürünü ekler
            for(let i = pageNum * 4; i < pageNum * 4 + 4; i++){
                if(i >= pages.length) break; // Verilen sayfada yeterli ürün yoksa döngüyü durdur

                let card = document.createElement("div");
                content.appendChild(card);
                card.classList.add("card");

                let img = document.createElement("img");
                img.src = pages[i].image;
                img.style.width = "70px";
                img.style.height = "70px";
                card.appendChild(img);

                let p = document.createElement("p");
                p.innerText = pages[i].title;
                card.appendChild(p);

                let price = document.createElement("p");
                price.innerText = "$" + pages[i].price;
                card.appendChild(price);

                // Kart tıklandığında ilgili ürünün detay sayfasına yönlendiren fonksiyon
                card.onclick = function() {
                    // Ürünün id'sine göre yönlendirme yapılacak URL'yi oluşturur
                    window.location.href = "product-details.html?id=" + pages[i].id;
                };
            }
        }
    </script>
</body>
</html>
